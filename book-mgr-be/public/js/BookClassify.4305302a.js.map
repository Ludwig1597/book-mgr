{"version":3,"sources":["webpack:///./src/views/BookClassify/index.vue","webpack:///./src/views/BookClassify/index.jsx","webpack:///./src/views/BookClassify/index.vue?9003"],"names":["title","placeholder","style","value","pagination","add","type","bordered","data-source","list","columns","actions","record","size","updateTitle","remove","dataIndex","slots","customRender","defineComponent","setup","ref","getList","bookClassify","res","result","success","data","onMounted","_id","msg","message","Modal","confirm","content","onOk","document","querySelector","render"],"mappings":"sJAS2B,O,iBAE2B,M,iBAe7B,M,iBAAa,O,iBAMb,M,kMA/BrB,eAoCM,YAnCF,eAkCS,GAlCDA,MAAM,UAAQ,C,wBAClB,iBASM,CATN,eASM,YARF,eAKW,GAJPC,YAAY,SACZC,MAAA,gBACQC,MAAO,EAAAH,M,gDAAA,EAAAA,MAAK,IACnBI,YAAY,G,oBAGjB,eAAmD,GAAxC,QAAO,EAAAC,IAAKC,KAAK,W,yBAAU,iBAAE,C,4BAE5C,eAAa,GAEb,eAoBM,YAnBF,eAkBU,GAjBNC,SAAA,GACCC,cAAa,EAAAC,KACbC,QAAS,EAAAA,S,CAECC,QAAO,gBACd,gBADiBC,EACjB,EADiBA,OACjB,MADuB,CACvB,eAIc,GAHVC,KAAK,QACJ,QAAK,mBAAE,EAAAC,YAAYF,IACpBN,KAAK,W,yBACR,iBAAE,C,+BAEH,eAIc,GAHVO,KAAK,QACJ,QAAK,mBAAE,EAAAE,OAAOH,IACfN,KAAK,U,yBACR,iBAAE,C,yKCzBrBI,EAAU,CAAC,CACbV,MAAO,KACPgB,UAAW,SACZ,CACChB,MAAO,KACPiB,MAAO,CACHC,aAAc,aAGPC,iBAAgB,CAC3BC,MAD2B,WAEvB,IAAMpB,EAAQqB,eAAI,IACZZ,EAAOY,eAAI,IAEXC,EAAO,yDAAG,oHACMC,OAAad,OADnB,OACNe,EADM,OAGZC,eAAOD,GACFE,SAAQ,YAAc,IAAXC,EAAW,EAAXA,KAERlB,EAAKN,MAAQwB,KANT,2CAAH,qDAUPtB,EAAG,yDAAG,oHACUkB,OAAalB,IAAIL,EAAMG,OADjC,OACFqB,EADE,OAGRC,eAAOD,GACFE,SAAQ,WACLJ,IACAtB,EAAMG,MAAQ,MANd,2CAAH,qDAUTyB,gBAAU,WACNN,OAGJ,IAAMP,EAAM,yDAAG,8GAAQc,EAAR,EAAQA,IAAR,SACON,OAAaR,OAAOc,GAD3B,OACLL,EADK,OAGXC,eAAOD,GACFE,SAAQ,YAAa,IAAVI,EAAU,EAAVA,IACRC,OAAQL,QAAQI,GAChBR,OANG,2CAAH,sDAWNR,EAAW,yDAAG,qGAAQe,EAAR,EAAQA,IACxBG,OAAMC,QAAQ,CAEVjC,MAAO,YACPkC,QAAS,0CAAC,QAAH,MAEc,6BAFd,QAKPC,KAAI,yDAAC,6GACKnC,EAAMoC,SAASC,cAAc,8BAA8BlC,MADhE,SAEeoB,OAAaT,YAAYe,EAAI7B,GAF5C,OAEKwB,EAFL,OAODC,eAAOD,GACFE,SAAQ,YAAS,IAAPI,EAAO,EAAPA,IACPC,OAAQL,QAAQI,GAChBR,OAVP,2CAAD,0DATQ,2CAAH,sDA6BjB,MAAO,CACHjB,MACAI,OACAT,QACAU,UACAK,SACAD,kBCxFZ,EAAOwB,OAASA,EAED","file":"js/BookClassify.4305302a.js","sourcesContent":["<template>\r\n    <div >\r\n        <a-card title=\"书籍分类管理\">\r\n            <div>\r\n                <a-input \r\n                    placeholder=\"输入书籍分类\" \r\n                    style=\"width:200px\"\r\n                    v-model:value=\"title\"\r\n                    :pagination=\"false\"\r\n                ></a-input>\r\n                &nbsp;\r\n                <a-button @click=\"add\" type=\"primary\">添加</a-button>\r\n            </div>\r\n            <a-divider />\r\n\r\n            <div>\r\n                <a-table\r\n                    bordered\r\n                    :data-source=\"list\"\r\n                    :columns=\"columns\"\r\n                >\r\n                    <template #actions=\"{record}\">\r\n                        <a-button \r\n                            size=\"small\" \r\n                            @click=\"updateTitle(record)\"\r\n                            type=\"primary\"\r\n                        >修改</a-button>\r\n                        &nbsp;\r\n                        <a-button \r\n                            size=\"small\" \r\n                            @click=\"remove(record)\"\r\n                            type=\"danger\"\r\n                        >删除</a-button>\r\n                    </template>\r\n                </a-table>\r\n            </div>\r\n        </a-card>\r\n    </div>\r\n</template>\r\n\r\n<script src=\"./index.jsx\"></script>","import { defineComponent, ref, onMounted } from 'vue';\r\nimport { bookClassify } from '@/service';\r\n//请求得到的信息用result去处理\r\nimport { result } from '@/helpers/utils'\r\nimport { message,Modal,Input} from 'ant-design-vue'\r\nimport { Item } from 'ant-design-vue/lib/vc-menu';\r\n\r\nconst columns = [{\r\n    title: '分类',\r\n    dataIndex: 'title',\r\n}, {\r\n    title: '操作',\r\n    slots: {\r\n        customRender: 'actions',\r\n    },\r\n}]\r\nexport default defineComponent({\r\n    setup() {\r\n        const title = ref('');\r\n        const list = ref([]);\r\n\r\n        const getList = async() => {\r\n            const res = await bookClassify.list();\r\n\r\n            result(res)\r\n                .success(({ data }) => {\r\n                    //.success((data) => {是错误的，要用解构的方式把data拿到\r\n                    list.value = data;\r\n                })\r\n        };\r\n\r\n        const add = async() => {\r\n            const res = await bookClassify.add(title.value);\r\n\r\n            result(res)\r\n                .success(() => {\r\n                    getList();\r\n                    title.value = '';\r\n                })\r\n        }\r\n\r\n        onMounted(() => {\r\n            getList();\r\n        })\r\n\r\n        const remove = async({ _id }) => {\r\n            const res = await bookClassify.remove(_id);\r\n\r\n            result(res)\r\n                .success(({ msg }) => {\r\n                    message.success(msg);\r\n                    getList();\r\n                })\r\n\r\n        }\r\n\r\n        const updateTitle = async({ _id }) => {\r\n            Modal.confirm({\r\n                //弹框\r\n                title: '请输入新的分类名称',\r\n                content: (\r\n                    <div>\r\n                        <Input class=\"__book_classify_new_title\"/>\r\n                    </div>\r\n                ),\r\n                onOk:async()=>{\r\n                    const title=document.querySelector('.__book_classify_new_title').value;\r\n                    const res=await bookClassify.updateTitle(_id,title);\r\n                    // console.log(_id);\r\n                    // console.log(title);\r\n                    //console.log(value);\r\n\r\n                    result(res)\r\n                        .success(({msg})=>{\r\n                            message.success(msg);\r\n                            getList();//下面的代码可以少发一次请求\r\n                            /* list.value.forEach((item)=>{\r\n                                if(item._id===_id){\r\n                                    item.title===title;\r\n                                }\r\n                            }) */\r\n                        });\r\n                },\r\n            });\r\n        }\r\n        return {\r\n            add,\r\n            list,\r\n            title,\r\n            columns,\r\n            remove,\r\n            updateTitle\r\n        }\r\n    }\r\n})","import { render } from \"./index.vue?vue&type=template&id=5f93836a\"\nimport script from \"./index.jsx?vue&type=script&lang=js\"\nexport * from \"./index.jsx?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}